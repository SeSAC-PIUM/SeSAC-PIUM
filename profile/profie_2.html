<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PIUM</title>
    <!-- <link rel="stylesheet" href="../common/root.css" /> -->
    <link rel="stylesheet" href="./profile.css" />
    <link rel="stylesheet" href="../common/global_style.css" />
    <script defer src="./profile.js"></script>
  </head>

  <style>
    .profile_container {
    }
    .profile_container .profile_header {
      padding: 64px 16px 40px 16px;
      text-align: center;
      margin: 0 auto;
      position: relative;
    }

    .profile_container .profile_contents_container {
      margin: 0 auto;
      max-width: 696px;
      padding: 40px 16px;
      border-top: 1px solid var(--color-grayscale-600);
    }

    .skip_btn {
      width: 100%;
      padding: 16px;
      background-color: var(--color-grayscale-600);
      color: var(--color-grayscale-100);
      border-radius: 4px;
      font-size: 16px;
      text-align: center;
      margin-bottom: 4px;
      /* position: absolute; */
      /* top: 64px; */
      /* right: 0; */
      cursor: pointer;
    }

    .profile_container .profile_contents_container .profile_contents {
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap {
      display: flex;
      flex-wrap: wrap;
      padding-bottom: 40px;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .title {
      width: 144px;
      position: relative;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .title
      .title_box {
      padding-bottom: 16px;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .label_container {
      width: 300px;
      display: flex;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .answer_container {
      width: 300px;
      /* display: flex; */
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .answer_container
      .radio_container {
      padding-bottom: 16px;
      display: flex;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .answer_container
      .input_wrap {
      padding-bottom: 16px;
      display: flex;
      align-items: center;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .answer_container
      label {
      margin-right: 32px;
      /* display: flex; */
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .title
      .title_box {
      display: flex;
      align-items: center;
      /* position: relative; */
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .title_box
      div {
      padding-right: 8px;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .title_box
      span {
      display: flex;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .desiredPosition_container {
      display: flex;
      width: auto;
      padding: 16px;
      align-items: center;
      border-radius: 4px;
      border: 1px solid #e9e9ee;
    }

    .profile_container
      .profile_contents_container
      .profile_contents
      .profile_content_wrap
      .profile_content {
    }

    .profile_contents_container .button_container {
      margin: 0 auto;
      max-width: 360px;
    }

    /* dropdown */
    fieldset {
      width: 296px;
      border: none;
      position: relative;
      /* font-size: 14px;
      padding: 16px 32px;
      border-radius: 4px;
      color: var(--color-grayscale-500);
      border: 1px solid var(--color-grayscale-400); */
    }
    input {
      font-size: 14px;
      padding: 16px 32px;
      border-radius: 4px;
      color: var(--color-grayscale-500);
      width: 300px;
      border: 1px solid var(--color-grayscale-200);
    }

    datalist {
      position: absolute;
      background-color: #fff;
      border: 1px solid var(--color-grayscale-200);
      border-radius: 4px;
      width: 296px;
      margin-top: 8px;
      padding: 16px 32px;
    }

    option {
      background-color: white;
      padding: 12px 0px;
      color: var(--color-grayscale-600);
      font-size: 14px;
      cursor: pointer;
    }

    option:hover,
    .active {
      background-color: var(--color-grayscale-100);
    }

    /* 커스텀 스타일링된 드롭다운 */

    input[type='radio'] {
      /* display: none; */
      width: auto;
      accent-color: green;
    }

    /* 커스텀 라디오 버튼 스타일 */
    .custom_radio {
      display: inline-block;
      width: auto;
      background-size: cover;
      background-repeat: no-repeat;
      cursor: pointer;
    }

    /* 체크되었을 때 이미지 변경 */
    .radio-image-1:checked + .custom-radio {
      /* background-image: url("../src/img/Radio_Button_1.png"); */
    }

    .radio-image-2:checked + .custom-radio {
      /* background-image:  url("../src/img/Radio_Button_1.png"); */
    }
    .btn-list {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      /* padding: 16px; */
    }

    .btn:hover,
    .btn:active {
      border: 1px solid var(--color-main-green);
      background-color: var(--color-main-green);
      color: var(--color-grayscale-100);
      cursor: pointer;
    }

    .btn.selected {
      border: 1px solid var(--color-main-green);
      background-color: var(--color-main-green);
      color: var(--color-grayscale-100);
    }

    .profile_contents_container .button_container {
      margin: 0 auto;
      max-width: 360px;
      padding: 32px 0px;
    }

    .button_selected_all {
      padding: 16px 32px;
      border: none;
      border-radius: 4px;
      /* width: 100%; */
      font-weight: 600;
      cursor: pointer;
    }
  </style>

  <body>
    <div class="profile_container ques_text">
      <div class="profile_header">
        <div class="page_title_point">
          추가정보
          <span class="page_title">입력</span>
        </div>
        <div class="section_title_desc">1/2</div>
        <!-- <span class="skip_btn">SKIP</span> -->
      </div>

      <div class="profile_contents_container">
        <div class="profile_contents">
          <div class="profile_content_wrap one_1">
            <div class="title">
              <div class="title_box">
                <div class="ques_text">취업경험</div>
              </div>
            </div>
            <div class="answer_container">
              <div class="label_container">
                <label>
                  <input
                    type="radio"
                    name="radio-group-3"
                    class="radio-group-3"
                  />
                  <span class="custom_radio">유</span>
                </label>

                <label>
                  <input
                    type="radio"
                    name="radio-group-3"
                    class="radio-image-2"
                  />
                  <span class="custom_radio">무</span>
                </label>
              </div>

              <div class="input_wrap">
                <span style="padding-right: 16px">분야</span>
                <input
                  type="text"
                  class="input"
                  onclick="handleRadioClick('radio-group-3')"
                />
              </div>
              <div class="input_wrap">
                <span style="padding-right: 16px">연차</span>
                <input
                  type="text"
                  class="input"
                  style="width: 50px"
                  onclick="handleRadioClick('radio-group-3')"
                />
                <span style="padding-left: 8px">년</span>
              </div>
            </div>
          </div>

          <div class="profile_content_wrap two_1">
            <div class="title">
              <div class="title_box">
                <div class="ques_text">창업경험</div>
              </div>
            </div>
            <div class="label_container">
              <label>
                <input
                  type="radio"
                  name="radio-group-4"
                  class="radio-image-1"
                />
                <span class="custom_radio">유</span>
              </label>

              <label>
                <input
                  type="radio"
                  name="radio-group-4"
                  class="radio-image-2"
                />
                <span class="custom_radio">무</span>
              </label>
            </div>
          </div>

          <div class="profile_content_wrap three_1">
            <div class="title">
              <div class="title_box">
                <div class="ques_text">전공</div>
              </div>
            </div>

            <input type="text" class="input" />
          </div>

          <div class="profile_content_wrap four_1">
            <div class="title">
              <div class="title_box">
                <div class="ques_text">github 주소</div>
              </div>
            </div>

            <input type="text" class="input" />
          </div>

          <div class="profile_content_wrap five_1">
            <div class="title">
              <div class="title_box">
                <div class="ques_text">포트폴리오 파일</div>
              </div>
            </div>
            <!-- <div
              class="answer_container"
              style="
                display: flex;
                flex-wrap: wrap;
                max-width: 400px;
                width: 100%;
              "
            > -->
            <!-- <input type="text" class="input" style="margin-right: 8px" /> -->
            <div class="answer_container">
              <input type="file" id="fileInput" style="display: none" />
              <button
                class="btn_add_file button_selected_all"
                style="margin-bottom: 8px"
              >
                파일 추가
              </button>
              <div
                class="box"
                style="max-width: 300px; width: 100%; padding: 24px 16px"
              >
                <ul id="fileList"></ul>
              </div>
            </div>
          </div>
          <!-- </div> -->

          <div class="profile_content_wrap six_1">
            <div class="title">
              <div class="title_box">
                <div class="ques_text">포트폴리오 링크</div>
              </div>
            </div>
            <div class="answer_container">
              <input type="text" class="input" style="margin-bottom: 8px" />
              <input type="text" class="input" />
            </div>
          </div>
        </div>
        <div class="button_container">
          <a href="../selection/selection.html" target="_blank">
            <div class="skip_btn">SKIP</div>
          </a>
          <!-- <a href="../profile/profie_3.html"> -->
          <button class="btn_save">저장하기</button>
          <!-- </a> -->
        </div>
      </div>
    </div>

    <script>
      // modal hover
      const profileModal = document.querySelector('.profile_modal');
      const titleBox = document.querySelector('.title_box');
      titleBox.addEventListener('mouseenter', () => {
        profileModal.style.display = 'block';
      });
      titleBox.addEventListener('mouseleave', () => {
        profileModal.style.display = 'none';
      });

      // box btn 클릭
      let selectedBtnId = null;

      function openAnswer(btnIndex) {
        if (selectedBtnId !== null) {
          document.getElementById(selectedBtnId).classList.remove('selected');
        }

        selectedBtnId = `btn${btnIndex}`;
        document.getElementById(selectedBtnId).classList.add('selected');
      }

      //file upload
      const fileInput = document.getElementById('fileInput');
      const fileList = document.getElementById('fileList');
      const btnUpload = document.querySelector('.btn_add_file');

      btnUpload.addEventListener('click', () => {
        fileInput.click();
      });

      // 기존에 저장된 파일 정보 불러오기
      const storedFiles = JSON.parse(localStorage.getItem('files')) || [];

      storedFiles.forEach((fileName) => {
        const listItem = createListItem(fileName);
        fileList.appendChild(listItem);
      });

      fileInput.addEventListener('change', (event) => {
        const selectedFile = event.target.files[0];
        if (selectedFile) {
          const listItem = createListItem(selectedFile.name);
          fileList.appendChild(listItem);

          // 파일 정보 저장
          storedFiles.push(selectedFile.name);
          localStorage.setItem('files', JSON.stringify(storedFiles));
        }
      });

      function createListItem(fileName) {
        const listItem = document.createElement('li');
        listItem.textContent = fileName;

        const deleteButton = document.createElement('button');
        deleteButton.textContent = '삭제';
        deleteButton.classList.add('btn_delete');
        deleteButton.addEventListener('click', () => {
          listItem.remove();

          // 파일 정보 업데이트 및 저장
          storedFiles.splice(storedFiles.indexOf(fileName), 1);
          localStorage.setItem('files', JSON.stringify(storedFiles));
        });

        listItem.appendChild(deleteButton);
        return listItem;
      }
      //input창 클릭 시 radio버튼 선택
      function handleRadioClick(targetRadioClass) {
        const radioButtons = document.querySelectorAll(`.${targetRadioClass}`);

        for (const radio of radioButtons) {
          if (radio.type === 'radio') {
            radio.checked = true;
          }
        }
      }

      //항목을 다 채워야 다음페이지로 넘어갈 수 있게 설정
      function validateInputs() {
        const employmentInput = document.querySelector(
          '.profile_content_wrap.one_1 input:checked'
        );
        const foundedInput = document.querySelector(
          '.profile_content_wrap.two_1 input:checked'
        );

        const majorInput = document.querySelector(
          '.profile_content_wrap.three_1 input'
        );

        const addressInput = document.querySelector(
          '.profile_content_wrap.four_1 input'
        );

        const fileInput = document.querySelector(
          '.profile_content_wrap.five_1 .btn.selected'
        );

        const portfolioInput = document.querySelector(
          '.profile_content_wrap.six_1 input'
        );

        if (!employmentInput) {
          alert('취업경험을 입력해 주세요');
        } else if (!foundedInput) {
          alert('창업경험을 선택해주세요.');
        } else if (!majorInput.value) {
          alert('전공을 입력해주세요.');
        } else if (!addressInput.value) {
          alert("github 주소를 입력해주세요. 없다면 '없음'이라고 작성해주세요");
        } else if (!portfolioInput.value) {
          alert(
            "포트폴리오 링크를 입력해주세요. 없다면 '없음'이라고 작성해주세요"
          );
        } else {
          // 모든 항목이 유효하다면 true 반환
          return true;
        }
      }

      function goToNextPage() {
        if (validateInputs()) {
          // 모든 항목이 유효하다면 다음 페이지로 이동
          window.location.href = '../profile/profie_3.html';
        }
      }

      // 가입완료 버튼 클릭 시 함수 호출
      const btnSave = document.querySelector('.btn_save');
      btnSave.addEventListener('click', goToNextPage);
    </script>
  </body>
</html>
